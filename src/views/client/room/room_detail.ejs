<%- include('../layout/header'); -%>

<!-- Nội dung chi tiết phòng -->
<div class="container mt-5 mb-5" style="padding-bottom: 100px;">
  <div class="row">
    <div class="col-md-6">
      <img
        src="/images/product/<%= room.image %>"
        class="img-fluid rounded shadow-sm"
        alt="<%= room.name %>"
      />
    </div>

    <div class="col-md-6">
      <h2><%= room.name %></h2>
      <p class="text-muted">Giá: <%= room.price.toLocaleString() %> VND / đêm</p>
      <p><%= room.description %></p>
      <a href="/booking?roomId=<%= room.id %>" class="btn btn-success mt-3"
        >Đặt phòng ngay</a
      >
    </div>
  </div>

  <!-- Đánh giá & Bình luận -->
  <div class="mt-5">
    <h4>Đánh giá & Bình luận</h4>

    <div class="mb-3">
      <% const stars = Math.round(room.rating || 4.5); %>
      <% for (let i = 1; i <= 5; i++) { %>
        <% if (i <= stars) { %>
        <i class="fas fa-star text-warning"></i>
        <% } else { %>
        <i class="far fa-star text-warning"></i>
        <% } %>
      <% } %>
      <span class="ms-2"><%= room.rating || '4.5' %>/5</span>
    </div>

    <div class="mb-4">
      <% if (room.comments && room.comments.length > 0) { %>
      <% room.comments.forEach(c => { %>
      <div class="border rounded p-3 mb-2 bg-light">
        <strong><%= c.user %></strong>
        <small class="text-muted ms-2"><%= c.date %></small>
        <p class="mt-2 mb-0"><%= c.content %></p>
      </div>
      <% }) %>
      <% } else { %>
      <p class="text-muted">Chưa có bình luận nào. Hãy là người đầu tiên!</p>
      <% } %>
    </div>

    <form action="/room/<%= room.id %>/comment" method="POST">
      <div class="mb-3">
        <label for="comment" class="form-label">Viết bình luận của bạn</label>
        <textarea id="comment" name="comment" class="form-control" rows="3" required></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Gửi bình luận</button>
    </form>
  </div>
</div>

<!-- include footer -->
<%- include('../layout/footer'); -%>
